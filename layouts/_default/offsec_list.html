{{ define "main" }}
<div class="notion-layout">

    <div class="notion-header">
        <div class="header-top-row">
            <div class="icon-container">
                <img src="/images/offsec.png" class="header-icon" alt="OffSec">
            </div>
        </div>
        
        <h1 class="page-title">OffSec Collection</h1>
        
        <div class="notion-meta">
            <span class="meta-item">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                @NeoIsBackAgain
            </span>
            <span class="meta-divider">•</span>
            <span class="meta-item">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                {{ len (where .Site.RegularPages "Params.tags" "intersect" (slice "OffSec" "PG" "OSCP" "Proving Grounds")) }} Machines Pwned
            </span>
        </div>

        <div class="notion-quote">
            <blockquote>
                "Try Harder. The industry standard for offensive security."
                <a href="https://www.offsec.com" target="_blank" class="quote-link">offsec.com ↗</a>
            </blockquote>
        </div>
    </div>

    <div class="notion-body">
        <div class="list-header-row">
            <span class="col-name">MACHINE NAME</span>
            <span class="col-tags">TAGS & DIFFICULTY</span>
        </div>
        
        <div class="machine-rows">
            {{ $pages := where .Site.RegularPages "Params.tags" "intersect" (slice "offsec" "OffSec" "PG" "OSCP" "Proving Grounds") }}
            {{ range $pages }}
            <a href="{{ .Permalink }}" class="notion-row">
                <div class="row-left">
                    <div class="row-icon-box">
                        
                        {{ if .Params.icon }}
                            <img src="{{ .Params.icon | absURL }}">
                        
                        {{ else if or (in .Params.tags "Windows") (in .Params.tags "windows") }}
                            <svg viewBox="0 0 512 512">
                                <circle cx="256" cy="256" r="256" fill="#00a2ed"/>
                                <g transform="translate(104, 82) scale(0.68)" fill="#ffffff">
                                    <path d="M0 93.7l183.6-25.3v177.4H0V93.7zm0 324.6l183.6 25.3V268.4H0v149.9zm203.8 28L448 480V268.4H203.8v177.9zm0-380.6v180.1H448V32L203.8 65.7z"/>
                                </g>
                            </svg>

                        {{ else if or (in .Params.tags "Linux") (in .Params.tags "linux") }}
                            <img src="/images/linux.sbg" alt="Linux">

                        {{ else }}
                            <svg viewBox="0 0 512 512" fill="#888">
                                <path d="M64 32C28.7 32 0 60.7 0 96v64c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm280 72a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zM0 352c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64v-64c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v64zm344-24a24 24 0 1 1 0 48 24 24 0 1 1 0-48zm48 24a24 24 0 1 1 48 0 24 24 0 1 1 -48 0z"/>
                            </svg>
                        {{ end }}

                    </div>
                    <span class="row-title">{{ .Title }}</span>
                </div>

                <div class="row-right">
                    {{ if or (in .Params.tags "Easy") (in .Params.tags "easy") (in .Params.tags "Warm Up") }}<span class="tag easy">EASY</span>{{ end }}
                    {{ if or (in .Params.tags "Medium") (in .Params.tags "medium") (in .Params.tags "Intermediate") }}<span class="tag medium">INTERMEDIATE</span>{{ end }}
                    {{ if or (in .Params.tags "Hard") (in .Params.tags "hard") }}<span class="tag hard">HARD</span>{{ end }}
                    
                    {{ if or (in .Params.tags "Windows") (in .Params.tags "windows") }}<span class="tag os windows">WIN</span>{{ end }}
                    {{ if or (in .Params.tags "Linux") (in .Params.tags "linux") }}<span class="tag os linux">LINUX</span>{{ end }}
                    
                    <span class="hover-arrow">→</span>
                </div>
            </a>
            {{ end }}
        </div>
    </div>
</div>

<style>
    /* Base Layout */
    .notion-layout {
        max-width: 900px;
        margin: 0 auto;
        padding-bottom: 60px;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
        color: #e0e0e0;
    }

    /* Header */
    .notion-header { padding: 0 20px; margin-top: -20px; }

    .icon-container {
        width: 85px; height: 85px; margin-bottom: 15px; position: relative; 
    }

    .header-icon {
        width: 100%; height: 100%; border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0,0,0,0.4); background: #151515; border: 1px solid #333; object-fit: contain;
    }

    .page-title {
        font-size: 2.8rem; font-weight: 800; margin: 0 0 12px 0; letter-spacing: -0.03em; color: #fff;
    }

    .notion-meta {
        display: flex; align-items: center; gap: 10px; color: #888; font-size: 0.95rem; margin-bottom: 30px; font-weight: 500;
    }

    .meta-item { display: flex; align-items: center; gap: 6px; }
    .meta-divider { color: #444; }

    .notion-quote {
        border-left: 3px solid #333; padding-left: 16px; color: #aaa; font-style: italic; margin-bottom: 50px; line-height: 1.6;
    }
    
    .quote-link {
        color: #3b89cc; /* OffSec Blue Accent */
        text-decoration: none; font-style: normal; margin-left: 8px; font-size: 0.9em; font-weight: 600; transition: opacity 0.2s;
    }
    .quote-link:hover { opacity: 0.7; }

    /* List Header */
    .notion-body { padding: 0 20px; }

    .list-header-row {
        display: flex; justify-content: space-between; padding: 0 15px 12px 15px;
        border-bottom: 2px solid #222; color: #777; font-size: 0.75rem; text-transform: uppercase; font-weight: 700; letter-spacing: 0.1em; margin-bottom: 8px;
    }

    /* Rows */
    .machine-rows { display: flex; flex-direction: column; gap: 6px; }

    .notion-row {
        display: flex; justify-content: space-between; align-items: center;
        padding: 14px 15px; border: 1px solid transparent; border-bottom: 1px solid #1a1a1a;
        background: rgba(255, 255, 255, 0.015); border-radius: 8px; text-decoration: none; transition: all 0.25s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    .notion-row:hover {
        background: rgba(255, 255, 255, 0.04); border-color: #333; box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        transform: translateY(-2px);
    }

    /* Icons */
    .row-left { display: flex; align-items: center; gap: 15px; }

    .row-icon-box {
        width: 34px; height: 34px; background: transparent; display: flex; align-items: center; justify-content: center; border-radius: 50%;
    }
    .row-icon-box img, .row-icon-box svg { width: 100%; height: 100%; object-fit: contain; }

    .row-title { color: #e0e0e0; font-weight: 600; font-size: 1.05rem; transition: color 0.2s; }
    .notion-row:hover .row-title { color: #fff; }

    /* Tags */
    .row-right { display: flex; align-items: center; gap: 8px; }

    .tag {
        padding: 4px 12px; border-radius: 20px; font-size: 0.7rem; font-weight: 700; letter-spacing: 0.5px; border: 1px solid transparent;
    }

    .easy { background: rgba(164, 203, 57, 0.1); color: #a4cb39; border-color: rgba(164, 203, 57, 0.2); }
    .medium { background: rgba(255, 159, 0, 0.1); color: #ff9f00; border-color: rgba(255, 159, 0, 0.2); }
    .hard { background: rgba(239, 83, 80, 0.1); color: #ef5350; border-color: rgba(239, 83, 80, 0.2); }
    
    .windows { background: rgba(0, 162, 237, 0.1); color: #00a2ed; border-color: rgba(0, 162, 237, 0.2); }
    .linux { background: rgba(245, 186, 18, 0.1); color: #f5ba12; border-color: rgba(245, 186, 18, 0.2); }

    .hover-arrow {
        color: #3b89cc; /* OffSec Blue Accent */
        font-weight: bold; font-size: 1.1rem; opacity: 0; margin-left: 5px; transform: translateX(-10px); transition: all 0.3s ease;
    }
    .notion-row:hover .hover-arrow { opacity: 1; transform: translateX(0); }

    @media (max-width: 600px) {
        .notion-header, .notion-body { padding: 0 10px; }
        .page-title { font-size: 2rem; }
        .col-tags { display: none; } 
        .tag.os { display: none; }
        .hover-arrow { display: none; }
    }
</style>
{{ end }}